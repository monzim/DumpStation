# ============================================
# DumpStation Production Configuration
# ============================================
# Copy this file to .env and fill in your values
# cp .env.example .env
# ============================================

# ============================================
# PostgreSQL Database (DumpStation Internal)
# ============================================
POSTGRES_DB=backup_service
POSTGRES_USER=postgres
POSTGRES_PASSWORD=CHANGE_ME_STRONG_PASSWORD_HERE

# ============================================
# JWT Configuration
# ============================================
# Generate a secure secret: openssl rand -base64 64
JWT_SECRET=CHANGE_ME_GENERATE_SECURE_SECRET_HERE
JWT_EXPIRATION_MINUTES=10

# ============================================
# Discord Integration (Required)
# ============================================
# Create a webhook in your Discord server:
# Server Settings -> Integrations -> Webhooks -> New Webhook
DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/YOUR_WEBHOOK_ID/YOUR_WEBHOOK_TOKEN
OTP_EXPIRATION_MINUTES=5

# ============================================
# Cloudflare Turnstile (Optional Bot Protection)
# ============================================
# Get keys from: https://dash.cloudflare.com/?to=/:account/turnstile
# Test keys (for development):
#   Site Key (always passes): 1x00000000000000000000AA
#   Secret Key: 1x0000000000000000000000000000000AA
TURNSTILE_ENABLED=false
TURNSTILE_SITE_KEY=1x00000000000000000000AA
TURNSTILE_SECRET_KEY=1x0000000000000000000000000000000AA
TURNSTILE_TIMEOUT=10

# ============================================
# CORS Configuration
# ============================================
# Comma-separated list of allowed origins
# For production, set to your actual domain(s)
CORS_ALLOWED_ORIGINS=https://dumpstation.yourdomain.com,https://www.yourdomain.com
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS,PATCH
CORS_ALLOWED_HEADERS=Origin,Content-Type,Accept,Authorization,X-Requested-With,X-2FA-Token
CORS_ALLOW_CREDENTIALS=true
CORS_MAX_AGE=86400
CORS_DEBUG=false

# ============================================
# System Admin User
# ============================================
SYSTEM_USERNAME=admin
SYSTEM_EMAIL=admin@yourdomain.com

# ============================================
# Service Ports (External)
# ============================================
# Backend API port (exposed to host)
BACKEND_PORT=8080

# Web frontend port (exposed to host)
WEB_PORT=3000

# ============================================
# Frontend Configuration
# ============================================
# API Base URL - should match your backend URL
# For production with reverse proxy: https://api.yourdomain.com/api/v1
# For direct access: http://your-server-ip:8080/api/v1
VITE_API_BASE_URL=http://localhost:8080/api/v1

# ============================================
# MinIO Configuration (Optional)
# ============================================
# Uncomment if using MinIO for local S3-compatible storage
# MINIO_ROOT_USER=minioadmin
# MINIO_ROOT_PASSWORD=CHANGE_ME_STRONG_PASSWORD_HERE
# MINIO_API_PORT=9000
# MINIO_CONSOLE_PORT=9001

# ============================================
# Production Deployment Notes
# ============================================
# 1. SECURITY:
#    - Change ALL passwords and secrets
#    - Use strong, randomly generated values
#    - Never commit .env file to version control
#
# 2. REVERSE PROXY:
#    - Recommended: Use Nginx/Caddy/Traefik in front
#    - Enable SSL/TLS (Let's Encrypt)
#    - Set proper CORS_ALLOWED_ORIGINS
#
# 3. BACKUPS:
#    - DumpStation database should also be backed up
#    - Consider automated snapshots of postgres_data volume
#
# 4. MONITORING:
#    - Check container logs: docker-compose logs -f
#    - Monitor disk space for volumes
#    - Set up health check alerts
#
# 5. UPDATES:
#    - Pull latest images: docker-compose pull
#    - Recreate containers: docker-compose up -d
#    - No downtime with proper health checks
# ============================================
